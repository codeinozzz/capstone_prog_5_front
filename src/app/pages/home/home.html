<app-header></app-header>

<div class="main-content">
  <h2>Available Hotels</h2>
  
  <app-search 
    (searchTerm)="onSearch($event)"
    (clearSearch)="onClearSearch()">
  </app-search>
  
  <div *ngIf="isSearching && !loading && !error" class="search-info">
    <p>
      <mat-icon>search</mat-icon>
      Results for: "<strong>{{ searchTerm | titlecase }}</strong>" 
      ({{ hotels.length | number }} {{ hotels.length === 1 ? 'hotel found' : 'hotels found' }})
    </p>
  </div>
  
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading hotels...</p>
  </div>

  <div *ngIf="error && !loading" class="error-container">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h3>Oops! Something went wrong</h3>
    <p>{{ error }}</p>
    <button 
      mat-raised-button 
      color="primary" 
      (click)="retryLoadHotels()">
      <mat-icon>refresh</mat-icon>
      Retry
    </button>
  </div>

  <div *ngIf="!loading && !error && hotels.length === 0" class="no-hotels-container">
    <mat-icon class="no-hotels-icon">hotel</mat-icon>
    <h3>No hotels available</h3>
    <p>No hotels found at this time.</p>
    <button 
      mat-raised-button 
      color="primary" 
      (click)="retryLoadHotels()">
      <mat-icon>refresh</mat-icon>
      Update
    </button>
  </div>

  <div *ngIf="!loading && !error && hotels.length > 0">
    <div class="hotels-summary">
      <p>
        Showing <strong>{{ hotels.length | number }}</strong> 
        {{ hotels.length === 1 ? 'hotel' : 'hotels' }} available
        <span *ngIf="!isSearching"> â€¢ Last updated: {{ getCurrentTime() | date:'short' }}</span>
      </p>
    </div>
    
    <div class="hotels-grid">
      <app-hotel-card 
        *ngFor="let hotel of hotels; trackBy: trackByHotelId"
        [hotel]="hotel"
        (hotelClicked)="onHotelReservado($event)">
      </app-hotel-card>
    </div>
  </div>
</div>

<app-footer></app-footer>